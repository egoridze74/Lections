Полезно вспомнить: [[Указатели. Общая информация]]
# Терминология

- ***Ссылка ( referense ) - это переменная, которая содержит в себе адрес, по которому лежат какие-то данные. У нее есть свой тип данных, как и у указателя или другой переменной.*** 

Ссылка заводится следующим образом:

>int a = 5;
>***int &aref = a;***

# Разница между ссылкой и указателем

Так в чем же разница между ссылкой и указателем , если их определения так похожи?

Рассмотрим следующий код:

>int main() {
>	int a = 5;
>	int * pa = &a;      // завели указатель
>	int &aref = a;       // завели ссылку
>	cout << pa << endl;                               ***// будет номер ячейки вида 0х0973А***
>	cout << aref << endl;                             ***// 5***
>}

***По ссылке, в отличие от указателя, мы получили именно данные, которые по этой самой ссылке хранятся. Т.е. у ссылок нет оператора разыменования.***

## Арифметика

Вспомним [[Арифметика указателей. Указатели и массивы]]. Если мы к указателю типа int прибавим 1, мы получим номер ячейки, который больше предыдущего номера на 4 байта. 
То есть:

>int main() {
>	int a = 5;
>	int * pa = &a;
>	cout << pa << endl;          // номер вида 0х009720
>	pa++;
>	cout << pa << endl;          // номер вида 0х009724
>}

Теперь же напишем похожий код, но для ссылок:

>int main() {
>	int a = 5;
>	int &aref = a;
>	cout << aref << endl;      // 5 
>	aref++;
>	cout << aref << endl;      // 6
>}

***Вывод: при помощи ссылок мы работаем с данными напрямую.***

>int main() {
>	int a = 5;
>	int &aref = a;
>	cout << a << endl;      ***// 5***
>	aref = 55;
>	cout << a << endl;      ***// 55***
>}

***Мы можем менять значение каких-либо переменных через ссылки напрямую.***

# Взаимодействие ссылок и указателей

- Пусть у нас существует переменная ( a = 5 ), которая лежит в какой-то ячейке ( пусть для примера это будет 0x000CF ). 
- Тогда нам нужен указатель на этот адрес ( пусть это будет int * pa = &a ).
- Мы адрес этой ячейки кладем в ссылку ( int &aref = * pa ). Теперь эта ссылка может работать с ( а = 5 ) напрямую. 
- Но сама эта ссылка тоже имеет свой адрес в памяти ( пусть это будет 0х11FC ). Но номер этой ссылки тоже ведь надо где-то хранить? 
- Для этого создадим указатель ( * ppa = &aref ). Теперь этот указатель имеет в себе адрес ссылки, которая в свою очередь имеет адрес переменной ( а = 5 ).

Получается каша, где одно содержится в другом. Как это выглядит?

>int main() {
>	int a = 5;
>	int * pa = &a;
>	int &aref = * pa;
>	int * ppa = &aref;
>}

![[Pasted image 20231028212059.png]]

***Тогда если мы как-то изменим * paa, то эти изменения коснутся и &aref вместе с переменной а.***

>int main() {
>	int a = 5;
>	int * pa = &a;
>	int &aref = * pa;
>	int * ppa = &aref;
>	
>	cout << a << endl;      ***// 5***
>	* paa = 12;
>	cout << a << endl;      ***// 12***
>}