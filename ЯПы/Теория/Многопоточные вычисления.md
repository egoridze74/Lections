#ЯПы 
## Определения
- **Поток** - минимальная единица выполнения кода
- **Мьютекс** - инструмент для блокировки ресурсов, предотвращающий одновременный доступ
- **Семафор** - управляет доступом к ресурсам, ограничивая количество потоков, которые могут его использовать (мьютекс, но с счётчиком)
- **std::lock_guard** - это инструмент в C++, который автоматически захватывает мьютекс при создании и освобождает его при уничтожении. Применяется в случаях, когда нужно гарантировать, что мьютекс будет освобожден, даже если произойдет ошибка. Используется для упрощения кода, где требуется защита ресурсов в многопоточных программах.
- **std::unique_lock** - тоже работает с мьютексами, но предоставляет больше контроля. Вы можете вручную управлять, когда мьютекс захватывается или освобождается. Также позволяет временно отпускать мьютекс в течение жизни unique_lock. Это полезно в более сложных многопоточных ситуациях, например, когда нужно ожидать какие-то условия, не блокируя другие потоки.
- **Атомарная операция** - операция выполняемая без прерывания
## Примеры

- Создание потока
```cpp
#include <thread>
void function() {};
std::thread myThread(function);
```

- Использование мьютекса
```cpp
#include <mutex>
std::mutex mtx;
mtx.lock();
//доступ к общему ресурсу
mtx.unlock();
```

- Использование семафора
```cpp
#include <semaphore>
std::counting_semaphore<10> sem(2);
```

- Реализация атомарных операций
```cpp
#include <atomic>
std::atomic<int> count = 0;
void increment() {
	count++; //Атомарно увеличиваем значение
}
```

## Проблемы
### Deadlock (взаимная блокировка)
Два потока ждут, пока освободятся ресурсы, занятые друг другом. 
![[Pasted image 20240417115915.png]]
### Race condition (состояние гонки)
Два потока работают с одними и теми же ресурсами, и результат вычислений зависит от порядка выполнения потоков.
![[Pasted image 20240417120450.png]]